/**
 * speed 模式，加速编译，禁用非必要task
 *
 * <p> 开启speed模式
 * 在local.properties 增加speed=true
 * 或
 * 在构建命令增加-Pspeed=true 如 ./gradlew :app:assembleDouyinCnDebug -Pspeed=true
 *
 */

tasks.whenTaskAdded { task ->

    // test
    if (task.name.contains('AndroidTest') || task.name.contains("UnitTest")) {
        task.enabled = false
    }

    // bugly
    if (task.name.startsWith("upload") && task.name.endsWith("SymtabFile")) {
        task.enabled = false
    }

    // bugly
    if (task.name.endsWith("SymtabFile")) {
        task.enabled = false
    }

    // fabric
    if (task.name.contains("crashlytics")) {
        task.enabled = false
    }

    // fabric
    if (task.name.contains("fabric")) {
        task.enabled = false
    }

    // mira
    if (task.name.contains("mira")) {
        task.enabled = false
    }
}

